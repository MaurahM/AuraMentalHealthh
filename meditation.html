<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aura | High Flow</title>
<style>
:root {
    --bg: #1A0A17;
    --color-panel: #2B1528;
    --accent: #ff6fc1;
    --accent-light: #ffa1d6;
    --glass: rgba(255,255,255,0.05);
    --border: rgba(255,255,255,0.12);
    --white: #ffffff;
    --muted: rgba(255,255,255,0.5);
}

/* Base */
html, body { margin:0; padding:0; font-family:'Plus Jakarta Sans',sans-serif; height:100%; background:var(--bg); color:var(--white); overflow-x:hidden; }
body {
    background: #1A0A17; /* deep dark purple */
    color: #ffffff;
    font-family: 'Plus Jakarta Sans', sans-serif;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
}

/* Ambient glows */
.ambient-bg { position:fixed; inset:0; z-index:0; pointer-events:none; }
.glow {
    position:absolute; width:70vw; height:70vw; border-radius:50%;
    background: radial-gradient(circle, var(--accent) 0%, transparent 70%);
    opacity:0.1; filter:blur(120px); animation: drift 35s infinite alternate;
}
@keyframes drift { from { transform: translate(-20%, -20%) scale(1); } to { transform: translate(25%,25%) scale(1.1); } }

/* Container */
.container { position:relative; z-index:1; padding:50px 24px; max-width:900px; margin:0 auto; }

/* Nav back */
.nav { display:flex; justify-content:flex-start; margin-bottom:60px; }
.back-btn {
    text-decoration:none; color:var(--white); font-weight:800; font-size:11px;
    text-transform:uppercase; letter-spacing:2px;
    background:var(--glass); padding:12px 24px; border-radius:100px; border:1px solid var(--border);
    backdrop-filter:blur(15px); transition:0.3s;
}
.back-btn:hover { background:var(--accent); color:#fff; transform:translateY(-2px) scale(1.05); }

/* Header */
.hero { text-align:center; margin-bottom:50px; }
.hero h1 {
    font-size: 2.5rem; 
    font-weight: 900; 
    letter-spacing: -1.5px;
    background: linear-gradient(180deg, #fff 40%, rgba(255,255,255,0.5) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.hero p { font-size:1rem; color:var(--muted); margin-top:12px; }

/* Meditation cards grid */
.selection-area { 
    display:grid; grid-template-columns:repeat(auto-fit, minmax(220px,1fr)); gap:24px; 
}
.med-card {
    background:var(--glass); border-radius:32px; padding:36px 24px; text-align:center;
    border:1px solid var(--border); backdrop-filter:blur(20px);
    cursor:pointer; transition: all 0.5s cubic-bezier(0.23,1,0.32,1);
    box-shadow:0 10px 30px rgba(0,0,0,0.25);
}
.med-card:hover { 
    transform:translateY(-10px) scale(1.02); 
    box-shadow:0 20px 50px var(--accent-light);
    border-color:var(--accent);
}
.duration {
    font-size:10px; font-weight:900; color:var(--accent); margin-bottom:12px;
    letter-spacing:2px; background: rgba(255,255,255,0.05); padding:4px 14px; border-radius:20px; display:inline-block;
}
.med-card h3 { margin:0 0 8px 0; font-weight:800; }
.med-card p { font-size:0.9rem; color:var(--muted); line-height:1.4; }

/* Zen overlay */
.backdrop {
    position:fixed; inset:0; display:none; flex-direction:column; align-items:center; justify-content:center;
    background: rgba(27,27,47,0.9); backdrop-filter:blur(30px); z-index:2000; text-align:center;
}
.timer-mini { font-size:16px; letter-spacing:5px; opacity:0.6; font-weight:900; margin-bottom:40px; }
.visual-container { width:300px; height:300px; margin-bottom:50px; display:flex; align-items:center; justify-content:center; }
.zen-orb {
    width:100%; height:100%; border-radius:50%;
    background: var(--accent); box-shadow:0 0 100px var(--accent-light), inset 0 0 50px rgba(255,255,255,0.2);
    filter:blur(2px); opacity:0.7; transition: all 4s cubic-bezier(0.45,0.05,0.55,0.95);
}
.guide-text { font-size:1.9rem; font-weight:400; max-width:80%; margin-bottom:40px; color:var(--white); min-height:2.5em; }

/* Buttons */
.btn-main {
    background:var(--white); color:var(--bg); border:none; padding:20px 60px; border-radius:100px;
    font-weight:900; cursor:pointer; transition:0.3s;
}
.btn-main:hover { transform:scale(1.05); box-shadow:0 0 30px var(--accent-light); }
.end-btn {
    margin-top:30px; background:none; border:none; color:var(--muted); font-size:11px; font-weight:800; letter-spacing:2px; cursor:pointer; opacity:0.5;
}

/* Responsive */
@media (max-width:600px){ .selection-area { grid-template-columns:1fr; } .hero h1{ font-size:2rem; } }

</style>
</head>
<body>

<audio id="zenAudio" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-17.mp3" type="audio/mpeg">
</audio>

<!-- Ambient glows -->
<div class="ambient-bg" id="bg-wrap">
    <div class="glow" style="top:-10%; left:-10%;"></div>
    <div class="glow" style="bottom:-10%; right:-10%;"></div>
</div>

<div class="container">
    <nav class="nav"><a href="Dashboard.html" class="back-btn">Back</a></nav>
    <header class="hero">
        <h1>Meditation</h1>
        <p>Choose a session and flow with the rhythm of your mind.</p>
    </header>

    <div class="selection-area">
        <div class="med-card" onclick="openZen('grounding')">
            <span class="duration">3 MIN</span>
            <h3>Grounding</h3>
            <p>Realign with reality.</p>
        </div>
        <div class="med-card" onclick="openZen('scan')">
            <span class="duration">4 MIN</span>
            <h3>Body Map</h3>
            <p>Release tension.</p>
        </div>
        <div class="med-card" onclick="openZen('visual')">
            <span class="duration">2 MIN</span>
            <h3>Cloud Drift</h3>
            <p>Detached observation.</p>
        </div>
        <div class="med-card" onclick="openZen('box')">
            <span class="duration">2 MIN</span>
            <h3>Box Rhythm</h3>
            <p>Find your center.</p>
        </div>
        <div class="med-card" onclick="openZen('mantra')">
            <span class="duration">1 MIN</span>
            <h3>Soul Speak</h3>
            <p>Quiet the mind.</p>
        </div>
        <div class="med-card" onclick="openZen('anchor')">
            <span class="duration">3 MIN</span>
            <h3>Sound Anchor</h3>
            <p>Focus through listening.</p>
        </div>
    </div>
</div>

<div id="backdrop" class="backdrop">
    <div class="timer-mini" id="timer">02:00</div>
    <div class="visual-container">
        <div id="orb" class="zen-orb"></div>
    </div>
    <div id="zenGuide" class="guide-text">Find your stillness.</div>
    <button id="mainAction" class="btn-main" onclick="toggleTimer()">Start Journey</button>
    <button class="end-btn" onclick="closeZen()">END SESSION</button>
</div>

<script src="theme-manager.js"></script>
<script>
if(typeof applyTheme==="function")applyTheme(localStorage.getItem('user-theme')||'pink');

const DATA={
grounding:{pace:6000,steps:["Breathe in deep","Release it all","You are here"]},
scan:{pace:5000,steps:["Relax your jaw","Drop your shoulders","Let go"]},
visual:{pace:4000,steps:["Thoughts are clouds","Let them drift","Empty blue sky"]},
box:{pace:4000,steps:["Inhale 4s","Hold 4s","Exhale 4s","Wait 4s"]},
mantra:{pace:5000,steps:["I am calm","I am safe","I am centered"]},
anchor:{pace:7000,steps:["Listen to your breath","Listen to the room","Listen to the silence"]}
};

let seconds=0,timer=null,paceTimer=null,isActive=false,currentKey=null;
const audio=document.getElementById('zenAudio');
const bgWrap=document.getElementById('bg-wrap');

function openZen(key){currentKey=key; seconds=120; updateDisplay(); document.getElementById('backdrop').style.display='flex'; document.getElementById('zenGuide').innerText="Ready?";}
function toggleTimer(){
    const btn=document.getElementById('mainAction'); const orb=document.getElementById('orb');
    if(!isActive){
        isActive=true; btn.innerText="Pause"; audio.play(); audio.volume=0.2;
        timer=setInterval(()=>{seconds--;updateDisplay(); if(seconds<=0)closeZen();},1000);
        let stepIdx=0;
        const runPace=()=>{
            document.getElementById('zenGuide').innerText=DATA[currentKey].steps[stepIdx];
            const isExp=stepIdx%2===0;
            orb.style.transform=isExp?"scale(1.25)":"scale(0.8)";
            orb.style.opacity=isExp?"0.8":"0.4";
            bgWrap.style.transform=isExp?"scale(1.05)":"scale(1)";
            stepIdx=(stepIdx+1)%DATA[currentKey].steps.length;
        };
        runPace(); paceTimer=setInterval(runPace,DATA[currentKey].pace);
    } else { clearInterval(timer); clearInterval(paceTimer); isActive=false; btn.innerText="Resume"; audio.pause(); }
}
function updateDisplay(){const m=Math.floor(seconds/60),s=seconds%60; document.getElementById('timer').innerText=`${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;}
function closeZen(){document.getElementById('backdrop').style.display='none'; clearInterval(timer); clearInterval(paceTimer); isActive=false; audio.pause(); document.getElementById('mainAction').innerText="Start Journey"; bgWrap.style.transform="scale(1)";}
</script>

</body>
</html>
